<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Студенческая библиотека</title>
    
    <!-- Предварительное подключение к Google Fonts для ускорения загрузки -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Materialize CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
          integrity="sha512-UJfAaOlIRtdR+0P6C3KUoTDAxVTuy3lnSXLyLKlHYJlcSU8Juge/mjeaxDNMlw9LgeIotgz5FP8eUQPhX1q10A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Пользовательский CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Favicon в формате ICO -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='icon/favicon.ico') }}">

  </head>
  
<body>

<!-- Навбар -->
<nav style="background-color: #0019ff;">
  <div class="nav-wrapper container">
    <a href="{{ url_for('index') }}" class="brand-logo">Библиотека</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="https://t.me/munificent_bot" target="_blank">Предложить свои книги</a></li>
      <li><a href="{{ url_for('login') }}">Вход</a></li>
    </ul>
  </div>
</nav>

<!-- Hero -->
<div class="section no-pad-bot" id="index-banner" style="background-color: #fff;">
  <div class="container">
    <br><br>
    <h1 class="header center" style="color:#000;">Добро пожаловать!</h1>
    <div class="row center">
      <h5 class="header col s12 light" style="color:#000;">
        Наша студенческая библиотека. Найдите материалы по любым направлениям
      </h5>
    </div>
    <div class="row center">
      <a href="#book-list" class="btn-large waves-effect waves-light"
         style="background-color: #FFC700; color:#000;">
        Перейти к каталогу
      </a>
    </div>
    <br><br>
  </div>
</div>

<!-- Фильтры и поиск -->
<div class="container">
  <div class="card hoverable" style="border:1px solid #000;">
    <div class="card-content" style="color:#000;">
      <span class="card-title">Фильтры и Поиск</span>
      <div class="row">
        <!-- Категория (direction) -->
        <div class="col s12 m6 l4">
          <label for="direction-filter">Категория</label>
          <select id="direction-filter" class="browser-default">
            <option value="">Все категории</option>
            <option value="учебные материалы">Учебные материалы</option>
            <option value="научная литература">Научная литература</option>
            <option value="справочные издания">Справочные издания</option>
            <option value="естественные науки">Естественные науки</option>
            <option value="технические науки">Технические науки</option>
            <option value="гуманитарные науки">Гуманитарные науки</option>
            <option value="социальные науки">Социальные науки</option>
            <option value="экономические науки">Экономические науки</option>
            <option value="периодические издания">Периодические издания</option>
            <option value="электронные ресурсы">Электронные ресурсы</option>
          </select>
        </div>
        <!-- Подкатегория (material_type) -->
        <div class="col s12 m6 l2">
          <label for="type-filter">Тип</label>
          <select id="type-filter" class="browser-default">
            <option value="">Все типы</option>
            <option value="учебники">Учебники</option>
            <option value="учебные пособия">Учебные пособия</option>
            <option value="практикумы">Практикумы</option>
            <option value="методические указания">Методические указания</option>
            <option value="лабораторные работы">Лабораторные работы</option>
            <option value="монографии">Монографии</option>
            <option value="диссертации">Диссертации</option>
            <option value="научные журналы">Научные журналы</option>
            <option value="сборники конференций">Сборники конференций</option>
            <option value="научные отчеты">Научные отчеты</option>
            <option value="энциклопедии">Энциклопедии</option>
            <option value="словари">Словари</option>
            <option value="справочники">Справочники</option>
            <option value="каталоги">Каталоги</option>
            <option value="база гостов">База ГОСТов</option>
            <option value="журналы">Журналы</option>
            <option value="газеты">Газеты</option>
            <option value="бюллетени">Бюллетени</option>
            <option value="электронные учебники">Электронные учебники</option>
            <option value="базы данных">Базы данных</option>
            <option value="мультимедийные материалы">Мультимедийные материалы</option>
            <option value="программное обеспечение">Программное обеспечение</option>
          </select>
        </div>
        <!-- Год -->
        <div class="col s12 m6 l2">
          <label for="year-filter">Год</label>
          <input id="year-filter" type="number" placeholder="Напр. 2020">
        </div>
        <!-- Язык -->
        <div class="col s12 m6 l2">
          <label for="lang-filter">Язык</label>
          <select id="lang-filter" class="browser-default">
            <option value="">Все</option>
            <option value="русский">Русский</option>
            <option value="английский">Английский</option>
            <option value="казахский">Казахский</option>
            <option value="другой">Другой</option>
          </select>
        </div>
        <!-- Поиск по названию -->
        <div class="col s12 m6 l2">
          <label for="search-title">Поиск по названию</label>
          <input id="search-title" type="text" placeholder="Введите название">
        </div>
      </div>
      <div class="row center">
        <button id="reset-filters" class="btn waves-effect waves-light"
                style="background-color:#FFC700; color:#000;">
          Сбросить
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Список книг -->
<div class="container" id="book-list" style="margin-bottom: 50px;">
  <div class="row">
    {% for book in books %}
      <div class="col s12 m6">
        <!-- Вся карточка кликабельна -->
        <div class="card hoverable book-item"
             data-id="{{ book.id }}"
             data-direction="{{ book.direction|lower }}"
             data-type="{{ book.material_type|lower }}"
             data-year="{{ book.year }}"
             data-lang="{{ book.language|lower }}"
             data-description="{{ book.description }}"
             style="cursor:pointer;">

          <div class="card-image">
            {% if book.image_path %}
              <img src="{{ url_for('static', filename=book.image_path) }}" alt="Обложка" class="book-cover">
            {% else %}
              <img src="https://via.placeholder.com/400x250?text=No+Cover" alt="Обложка">
            {% endif %}
          </div>

          <div class="card-content" style="color:#000;">
            <span class="card-title" style="color:#0019ff;">
              {{ book.title }}
            </span>
            <p>Автор: {{ book.author }}</p>
            <p>Год: {{ book.year }}</p>
            <p>Язык: {{ book.language }}</p>
            <!-- Приписка категории/подкатегории -->
            <p style="color:#777; font-size:14px;">
              {{ book.direction }} / {{ book.material_type }}
            </p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- Модальное окно "Подробнее" -->
<div id="modal-overlay" class="modal">
  <div class="modal-content" style="color:#000;">
    <a href="#!" class="modal-close btn-flat right">&times;</a>
    <div class="row">
      <div class="col s12 m4">
        <img id="modal-cover" src="" alt="Обложка" class="responsive-img">
      </div>
      <div class="col s12 m8">
        <h5 id="modal-title" style="color:#0019ff;"></h5>
        <p id="modal-author"></p>
        <p id="modal-year"></p>
        <p id="modal-lang"></p>
        <p id="modal-description" class="flow-text"></p>
        <a id="download-link" class="btn waves-effect waves-light"
           style="background-color:#FFC700; color:#000;" href="#" download>
          Скачать
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Футер -->
<footer class="page-footer" style="background-color:#0019ff;">
  <div class="container">
    <div class="row">
      <div class="col s12 m6">
        <h5 style="color:#FFC700;">Студенческая библиотека</h5>
        <p style="color:#fff;">
          Материалы по учебным дисциплинам, научной литературе, справочникам и т.д.
        </p>
      </div>
      <div class="col s12 m6 right-align">
        <a href="https://t.me/munificent_bot" target="_blank" class="btn waves-effect waves-light"
           style="background-color:#FFC700; color:#000; margin-top:20px;">
          Предложить книги
        </a>
      </div>
    </div>
  </div>
  <div class="center" style="color:#fff; padding:10px;">© 2024 Студенческая библиотека</div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var modals = document.querySelectorAll('.modal');
  M.Modal.init(modals);
});
</script>
</body>
</html>
